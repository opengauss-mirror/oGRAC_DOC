GUC参数

### **_LOG_LEVEL**

**参数描述**  
设置数据库运行、调试及长查询的日志记录级别。此参数的设置**不影响**审计日志的功能。

**取值范围**  
[0, 1911] （无符号整数）

**工作原理**  
该参数的值由所需记录的日志级别对应的十进制标识**累加而成**。系统根据该值，判断需要开启哪些类型的日志记录。

**日志级别与取值表**

| 日志类型 | 说明  | 16进制值 | 10进制值（标识） |
| --- | --- | --- | --- |
| **RUN ERROR** | 记录运行错误信息。 | 0x00000001 | 1   |
| **RUN WARNING** | 记录运行告警信息。 | 0x00000002 | 2   |
| **RUN INFORMATION** | 记录正常运行信息（如SQL语句）。 | 0x00000004 | 4   |
| **DEBUG ERROR** | 记录调试错误信息。 | 0x00000010 | 16  |
| **DEBUG WARNING** | 记录调试告警信息。 | 0x00000020 | 32  |
| **DEBUG INFORMATION** | 记录调试信息。 | 0x00000040 | 64  |
| **LONGSQL LOG** | 启用长查询日志记录。 | 0x00000100 | 256 |
| **OPER LOG** | (无效值，无法通过此参数设置) | 0x00000200 | 512 |
| **LONGSQL PARAM** | 将绑定参数的具体值打印到长查询日志。 | 0x00000400 | 1024 |

**配置示例与说明**

1. **默认配置**
  
  - `_LOG_LEVEL = 7`
    
  - 含义：`1 (RUN ERROR) + 2 (RUN WARNING) + 4 (RUN INFORMATION) = 7`
    
  - 效果：记录所有级别的**RUN日志**（错误、警告、信息）。
    
2. **自定义组合**
  
  - **示例**：如需同时记录 `RUN ERROR`、`DEBUG ERROR` 和 `LONGSQL LOG`，则计算值为：`1 + 16 + 256 = 273`。
    
  - **设置命令**：
    
    ALTER SYSTEM SET _log_level = 273;
    
3. **特殊规则**
  
  - **值为 0**：关闭所有 `RUN日志`、`DEBUG日志` 和 `LONGSQL日志`。
    
  - **LONGSQL PARAM 依赖**：只有 `LONGSQL LOG`（256）被启用时，`LONGSQL PARAM`（1024）的设置才会生效。
    
  - **OPER LOG**：此表项为无效值，无法通过 `_LOG_LEVEL` 参数启用。
    

**参数设置语法**

ALTER SYSTEM SET _log_level = <计算后的整数值>;

### **_INDEX_BUFFER_SIZE**

**参数描述**  
用于存储索引热点页（当前主要指B树索引根节点页面）只读副本的全局缓存。该缓存旨在减少对高并发访问索引页的争用，从而提升系统并发性能。

**取值范围**

- 最小值：`16K` （16,384 字节）
  
- 最大值：`32T` （35,184,372,088,832 字节）
  
- 单位：字节
  

**默认值**  
`8M` （8,388,608 字节）

### **_DISABLE_SOFT_PARSE**

**参数描述**  
控制是否禁用数据库的软解析功能。

**注意**：此开关对存储过程中的SQL语句无效。

**取值范围与影响**

| 取值  | 含义  | 主要影响 |
| --- | --- | --- |
| **TRUE** | 禁用软解析功能。 | 系统视图DV_SQLS 将不可用。 |
| **FALSE** | 启用软解析功能。 | 1. 会缓存SQL的解析树，提升重复SQL语句的执行速度。<br>2. 系统视图DV_SQLS功能可用。 |

**默认值**  
`FALSE`

### **_ENABLE_QOS**

**参数描述**  
控制是否启用数据库内部的服务质量流控机制。在高并发场景下，启用此开关有助于优化系统资源调度，以保障数据库整体的稳定性和吞吐量，从而达到最优性能表现。

**取值范围与含义**

| 取值  | 含义  |
| --- | --- |
| **TRUE** | 打开流控（QoS）开关。 |
| **FALSE** | 关闭流控（QoS）开关。 |

**默认值**  
`FALSE`

### **USE_NATIVE_DATATYPE**

**参数描述**  
为提升与不同数据库的兼容性并丰富数据类型，提供此参数来区分和映射数值类型的关键词。它决定了在创建表时，特定的数值类型关键词应映射到何种具体的底层数据类型。

**核心特性**

- **生效时间**：修改后需**重启数据库**才能生效。
  
- **作用范围**：仅对参数生效后**新创建的表**起作用。已存在的对象维持原有定义，不会被自动更改。
  
- **逻辑备份**：导出表定义时，统一使用不受此参数影响的关键词。
  

**取值范围与映射逻辑**

| 取值  | 设计目标 | 映射逻辑 |
| --- | --- | --- |
| **TRUE** | 兼容 **MySQL** 和 **PostgreSQL** 的数据类型。 | 有分歧的数值关键词使用类 C 语言的**原生数据类型**。 |
| **FALSE** | 兼容 **Oracle** 数据类型。 | 所有数值关键词统一映射为 **NUMBER** 类型。 |

**数据类型关键词映射表**

| 数据类型关键词 | 当 `USE_NATIVE_DATATYPE = FALSE` 时映射的数据类型 | 当 `USE_NATIVE_DATATYPE = TRUE` 时映射的数据类型 |
| --- | --- | --- |
| **BIGINT** | `NUMBER(38)` | `BINARY_BIGINT` |
| **DOUBLE** | `NUMBER` | `BINARY_DOUBLE` |
| **FLOAT** | `NUMBER` | `BINARY_DOUBLE` |
| **INT** | `NUMBER(38)` | `BINARY_INTEGER` |
| **INTEGER** | `NUMBER(38)` | `BINARY_INTEGER` |
| **REAL** | `NUMBER` | `BINARY_DOUBLE` |
| **SMALLINT** | `NUMBER(38)` | `BINARY_INTEGER` |
| **TINYINT** | `NUMBER(38)` | `BINARY_INTEGER` |

**不受影响的关键词**  
以下关键词的映射关系不受本参数取值影响：

- `BINARY_BIGINT`
  
- `BINARY_INTEGER`
  
- `BINARY_DOUBLE`
  

**默认值**  
`TRUE`

### **_PREFETCH_ROWS**

**参数描述**  
设置在数据检索过程中，系统提前预读取到缓存中的行数。

**取值范围**

- 整数
  
- 最小值：`1`
  
- 最大值：`2^32 - 1`
  

**默认值**  
`100`

### **CHECKPOINT_PERIOD**

**参数描述**  
设置系统执行两次checkpoint之间的最大时间间隔。当达到此预设的时间间隔时，将自动触发一次checkpoint。

**特性**

- **别名**：`CHECKPOINT_TIMEOUT`（不建议使用）。

**取值范围**

- 整数，单位：秒
  
- 最小值：`1` 
  
- 最大值：`2^32 - 1` 
  

**默认值**  
`300` 

### **CHECKPOINT_PAGES**

**参数描述**  
设定触发checkpoint的脏页数量阈值。当数据库缓冲区中的脏页数量达到此设定值时，将自动触发一次checkpoint。

**特性**

- **别名**：`CHECKPOINT_INTERVAL`（不建议使用）。

**取值范围**

- 整数，单位：页
  
- 最小值：`1` 
  
- 最大值：`2^32 - 1` 
  

**默认值**  
`100,000` 

### **REACTOR_THREADS**

**参数描述**  
设置用于处理I/O侦听的线程数量。这些线程负责接收并分发来自客户端的连接请求和网络数据包。

**配置建议**

- **推荐值**：`OPTIMIZED_WORKER_THREADS / 50`。
  
- **风险提示**：
  
  1. 设置过大会额外消耗CPU、内存及线程资源。在系统资源不足时，可能导致数据库运行异常。
    
  2. 设置值不允许大于Agent线程的总数。
    

**取值范围**  
[1, 10000]

**默认值**  
`1`

### **OPTIMIZED_WORKER_THREADS**

**参数描述**  
设置数据库最优工作线程的数量。此参数决定了系统在会话与线程之间是采用**绑定模式**还是**分离模式**。

**工作模式**

- 当会话数 > OPTIMIZED_WORKER_THREADS，系统切换为会话和线程分离模式，否则为绑定模式。
  

**与 MAX_WORKER_THREADS 的关系**

1. **启动时**：若配置文件中 `OPTIMIZED_WORKER_THREADS > MAX_WORKER_THREADS`，则自动将 `MAX_WORKER_THREADS` 调整为与本参数值相等。
  
2. **启动后**：
  
  - 可在线将其设置为小于或等于当前 `MAX_WORKER_THREADS`的任意值。
    
  - 若尝试设置为大于当前 `MAX_WORKER_THREADS` 的值，系统将报错。
    
3. **重启后**：`MAX_WORKER_THREADS` 将保持原值，不会因本参数的修改而改变。
  

**配置建议与约束**

- **最大值上限**：不建议超过 `SESSIONS` 参数的配置值，否则会造成线程资源闲置浪费。
  
- **资源消耗**：
  
  - 每个工作线程约占用 **0.5 M+** 的内存。
    
  - 设置过大会显著增加 CPU 和内存开销，在资源不足时可能导致数据库异常。
    
- **绝对上限**：因受安全函数内存限制（传入内存上限为2G），本参数最大值为 **10000**。
  

**取值范围**  
[2, 10000]

**默认值**  
`100`

### **MAX_WORKER_THREADS**

**参数描述**  
设置数据库工作线程池的最大容量。

**与 OPTIMIZED_WORKER_THREADS 的关系**

1. **数值关系**：本参数值**必须大于或等于** `OPTIMIZED_WORKER_THREADS`。若尝试将其设置为小于当前 `OPTIMIZED_WORKER_THREADS` 的值，系统将报错。
  
2. **线程扩展**：当活跃会话数超过 `OPTIMIZED_WORKER_THREADS` 时，工作线程数可以从最优值继续扩展，直到达到本参数设定的**最大值**。即可额外扩展的线程数为 `MAX_WORKER_THREADS - OPTIMIZED_WORKER_THREADS`。
  

**配置建议与约束**

- **最大值参考**：`OPTIMIZED_WORKER_THREADS` 不建议超过 `SESSIONS` 参数的配置值，否则会造成线程资源浪费。
  
- **资源消耗**：
  
  - 每个工作线程约占用 **0.5 M+** 的内存。
    
  - 设置过大会显著增加 CPU 和线程管理开销，在资源不足时可能导致数据库异常。
    
- **绝对上限**：受系统安全函数内存限制，本参数最大值为 **10000**。
  

**取值范围**  
[2, 10000]

**默认值**  
`100`

### **STATS_LEVEL**

**参数描述**  
控制是否收集并统计对表进行的DML（数据操作语言）操作信息。

**特性**

- **别名**：`STATISTICS_LEVEL`（不建议使用）。

**取值范围与行为**

| 取值  | 含义与行为 |
| --- | --- |
| **TYPICAL** 或 **ALL** | 启用表监控（Table-monitoring）。<br>• 系统将收集对表执行的DML操作的统计信息。<br>• 收集到的统计信息会在约 15分钟后展示在系统表 `SYS_DML_STATS`中。 |
| **BASIC** | 禁用Table-monitoring。<br>• 不收集上述DML操作统计信息。 |

**默认值**  
`TYPICAL`

### **BUF_POOL_NUM**

**参数描述**  
设置数据缓冲区（data buffer）的分区数量。

**取值范围**  
[0, 1024]

**默认值**  
`0`

**特殊说明**

- 当该参数**未配置**或**显式设置为 `0`** 时，系统会根据 `DATA_BUFFER_SIZE` 的实际值**自动计算并调整**一个合理的分区数。